# nghttp2-minimal-cmake
Minimal cmake support to build core nghttp2 library on Windows

This should of course live in the nghttp2 repository but the current state is "quick and dirty" and I intend to make some improvements before submitting it to the nghttp2 project.  I'm making it available here primarily for those building Apache httpd on Windows and in need of a simple build.

Instructions
------------

1. Download and unpack nghttp2-1.3.4.zip (the only version I tested) from https://nghttp2.org/.
2. Copy the `CMakeLists.txt` file from this repository to the top-level nghttp2 source directory.
3. Open a Visual Studio command prompt with `cmake` in `PATH` and run the following commands from a scratch (build) directory:
```
cmake -DCMAKE_INSTALL_PREFIX=c:\path\to\install -G "NMake Makefiles" -DCMAKE_BUILD_TYPE=RelWithDebInfo c:\path\to\nghttp2-1.3.4
nmake
nmake install
```

History
-------

* 2015-10-04
  * Automatically configure `nghttp2ver.h`
* 2015-10-03
  * Initial version

Future plans
------------

1. Edit `nghttp2ver.h` automatically.
2. Name the libraries differently for debug vs. release, similar to `lib\Makefile.msvc`.
3. Include a resource file similar to the one generated by `lib\Makefile.msvc`.
4. Investigate compile/link warnings and see if they indicate something is wrong with the build.
5. See what other nghttp2 features could/should be supported and see how the cmake build might support it.
6. Propose it to the nghttpd project.
 
(Or just the last step if I don't find time to work on it further.)

Pull requests and issues
------------------------
Feel free to send pull requests for problems you find and fix.
